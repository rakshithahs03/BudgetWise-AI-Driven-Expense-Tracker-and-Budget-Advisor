<div class="form-container">
  <h3>Add New Saving Goal</h3>
  <form (ngSubmit)="onSubmit()">
  @if (errorMessage) {
    <div class="error-alert">
      {{ errorMessage }}
    </div>
  }

    <div>
      <label for="category">Category</label>
      @if (isNewCategory) {
        <input type="text" id="category" [(ngModel)]="goal.category" name="category" placeholder="Enter new category" required>
        <button type="button" (click)="isNewCategory = false">Select from list</button>
      } @else {
        <select id="category" [(ngModel)]="goal.category" name="category" required (change)="onCategoryChange($event)">
          <option value="" disabled selected>Select a category</option>
          <option value="new">-- Create new category --</option>
          @for (cat of categories; track cat) {
            <option [value]="cat">{{ cat }}</option>
          }
        </select>
      }
    </div>
    <div>
      <label for="amount">Target Amount</label>
      <input type="number" id="amount" [(ngModel)]="goal.targetAmount" name="targetAmount" required>
    </div>
    <div>
      <label for="deadline">Deadline</label>
      <input type="date" id="deadline" [ngModel]="goal.deadline | date:'yyyy-MM-dd'" (ngModelChange)="goal.deadline = $event" name="deadline" required>
    </div>
    <div class="form-actions">
      <button type="submit">Add Goal</button>
      <button type="button" (click)="closeForm.emit()">Cancel</button>
    </div>
  </form>
</div>
